<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Getting Started</title>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <script>
      var body;
      var elements = [];
      var time;
      document.onreadystatechange = function () {
        if ('complete' == document.readyState) {
          time = Date.now();
          prev = 0;
          body = document.querySelector('body');
          var __elements = document.querySelectorAll('body *');
          for (var i = 0; i < __elements.length; ++i) {
            var style = window.getComputedStyle(__elements[i]);
            if ("none" != style.animationName) {
              __elements[i].__animationDelay = parseFloat(style.animationDelay);
              elements.push(__elements[i])
            }
          }

          var OFFSET = 14000;
          var notes = [
            {time: OFFSET + 15000, method: 'note_on',  noteNo: 48},
            {time: OFFSET + 15250, method: 'note_off', noteNo: 48},
            {time: OFFSET + 15250, method: 'note_on',  noteNo: 50},
            {time: OFFSET + 15500, method: 'note_off', noteNo: 50},
            {time: OFFSET + 15500, method: 'note_on',  noteNo: 52},
            {time: OFFSET + 15750, method: 'note_off', noteNo: 52},
            {time: OFFSET + 15750, method: 'note_on',  noteNo: 53},
            {time: OFFSET + 16000, method: 'note_off', noteNo: 53},
            {time: OFFSET + 16000, method: 'note_on',  noteNo: 55},
            {time: OFFSET + 16250, method: 'note_off', noteNo: 55},
            {time: OFFSET + 16250, method: 'note_on',  noteNo: 57},
            {time: OFFSET + 16500, method: 'note_off', noteNo: 57},
            {time: OFFSET + 16500, method: 'note_on',  noteNo: 59},
            {time: OFFSET + 16750, method: 'note_off', noteNo: 59},
            {time: OFFSET + 16750, method: 'note_on',  noteNo: 60},
            {time: OFFSET + 16750, method: 'note_on',  noteNo: 64},
            {time: OFFSET + 16750, method: 'note_on',  noteNo: 67},
            {time: OFFSET + 17000, method: 'note_off', noteNo: 60},
            {time: OFFSET + 17000, method: 'note_off', noteNo: 64},
            {time: OFFSET + 17000, method: 'note_off', noteNo: 67},
          ];

          (function loop(){
            var elapsed = Date.now() - time;
            if (OFFSET + 14000 < elapsed && elapsed < OFFSET + 18000) {
              for (var i = 0; i < notes.length; ++i) {
                if (prev <= notes[i].time && notes[i].time < elapsed) {
                  var iframe = document.createElement('IFRAME');
                  iframe.setAttribute('src', "nasequencer://" + notes[i].method + '/' + notes[i].noteNo);
                  document.documentElement.appendChild(iframe);
                  iframe.parentNode.removeChild(iframe);
                  iframe = null;
                }
              }
            }
            prev = elapsed;
            window.requestAnimationFrame(loop);
          })();
        }
      }

      var timer = null;
      window.addEventListener('resize', function () {
          if (timer) {
            clearTimeout(timer);
          }

          location.href = "nasequencer://all_note_off";

          body.style.display = 'none';
          timer = setTimeout(function () {
            body.style.display = 'block';
            var elapsed = Date.now() - time;
            for (var i = 0; i < elements.length; ++i) {
              elements[i].style.animationDelay = (elements[i].__animationDelay - (elapsed / 1000)) + 's';
            }
            timer = null;
            prev = elapsed;
          }, 50);
      });
    </script>

    <a class="btn-exit" href="nasequencer://exit">Exit</a>

    <div class="introduction">
      <h1>What is NASequencer?</h1>
      <p>For MIDI programming with plain-text.</p>
      <p>Focus on composing quickly and managing easily.</p>
      <h2>Anyway, let’s get started!</h2>
    </div>

    <div class="create-new-file">
      <p>At the beginning, create new file.</p>

      <div class="menu">
        <span class="apple"></span>
        <span class="nasequencer">NASequencer</span>
        <span class="file">File</span>
        <span class="edit">Edit</span>
        <span class="etc">...</span>

        <div class="submenu">
          <span class="new">New<span>⌘N</span></span>
          <span class="open">Open<span>⌘O</span></span>
          <span class="open-recent">Open Recent<span>▶</span></span>
        </div>

        <div class="panel">
          <div class="header"></div>
          <div class="filename">
            <p>Untitled.nas</p>
          </div>
          <div class="cancel">
            <p>Cancel</p>
          </div>
          <div class="create">
            <p>Create</p>
          </div>
        </div>
      </div>
    </div>

    <div class="demonstration">
      <div class="description">
        <p>Type sequence code on text-editor.</p>
        <p>Anytime you save file, NASequencer automatically reflects music sequence in document window.</p>
        <p><b>Let’s play it!</b></p>
      </div>
      <div class="editor-description">
        <p>Save it!!<br>⌘S</p>
      </div>
      <div class="document-description">
        <p>Play it!!<br>⌘P</p>
      </div>
      <div class="arrow">
        <div></div>
        <div></div>
      </div>
      <div class="editor">
        <div class="content">
          <div class="first">
            <p><span>2</span><span>4</span><span>0</span><span>:</span><span>&nbsp;</span><span>C</span><span>2</span></p>
            <p><span>2</span><span>4</span><span>0</span><span>:</span><span>&nbsp;</span><span>D</span><span>2</span></p>
            <p><span>2</span><span>4</span><span>0</span><span>:</span><span>&nbsp;</span><span>E</span><span>2</span></p>
            <p><span>2</span><span>4</span><span>0</span><span>:</span><span>&nbsp;</span><span>F</span><span>2</span></p>
          </div>
          <div class="second">
            <p><span>2</span><span>4</span><span>0</span><span>:</span><span>&nbsp;</span><span>G</span><span>2</span></p>
            <p><span>2</span><span>4</span><span>0</span><span>:</span><span>&nbsp;</span><span>A</span><span>2</span></p>
            <p><span>2</span><span>4</span><span>0</span><span>:</span><span>&nbsp;</span><span>B</span><span>2</span></p>
            <p><span>2</span><span>4</span><span>0</span><span>:</span><span>&nbsp;</span><span>C</span><span>3</span><span>&nbsp;</span><span>E</span><span>3</span><span>&nbsp;</span><span>G</span><span>3</span></p>
          </div>
        </div>
      </div>
      <div class="document">
        <div class="content">
          <div class="selection">
          </div>
          <div class="event-list-header">
          </div>
          <div class="event-list">
            <div class="event-list-content">
              <div class="first">
                <p>001:01:000 C2</p>
                <p>001:01:240 D2</p>
                <p>001:02:000 E2</p>
                <p>001:02:240 F2</p>
              </div>
              <div class="second">
                <p>001:03:000 G2</p>
                <p>001:03:240 A2</p>
                <p>001:04:000 B2</p>
                <p>001:04:240 C3</p>
                <p>001:04:240 E3</p>
                <p>001:04:240 G3</p>
              </div>
            </div>
          </div>
          <div class="piano-roll">
            <div class="first">
              <div>
                <span></span>
              </div>
              <div>
                <span></span>
              </div>
              <div>
                <span></span>
              </div>
              <div>
                <span></span>
              </div>
            </div>
            <div class="second">
              <div>
                <span></span>
              </div>
              <div>
                <span></span>
              </div>
              <div>
                <span></span>
              </div>
              <div>
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
          </div>
          <div class="velocity">
            <div class="first">
              <span></span>
              <span></span>
              <span></span>
              <span></span>
            </div>
            <div class="second">
              <span></span>
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
          <div class="play-line">
          </div>
        </div>
      </div>
    </div>

    <div class="ending">
      <h1>
        This is basic flow of NASequencer.
        <br/>
        That’s all!
      </h1>
      <p>
        Next step, listen to example and figure out composition of music syntax.
        <br/>
        You can edit example and preview result.
        <br/>
        When you want to reset it, reopen example from welcome window or links below.
      </p>
      <a href="nasequencer://example">Listen to Example</a>
      <h2><br/>Note:</h2>
      <p>Anytime, you have question about music syntax, see <a href="nasequencer://syntax">references</a>.<br/>You can choose from following languages.</p>
      <ul>
        <li>Note as Sequence</li>
        <li>ABC Notation</li>
        <li>Music Macro Language</li>
      </ul>
      <p> When you are familiar with basics, read <a href="nasequencer://operation">operation manual</a> for more advanced usage.</p>
    </div>
  </body>
</html>
