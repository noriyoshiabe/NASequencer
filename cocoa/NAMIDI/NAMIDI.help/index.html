<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="AppleTitle" content="NAMIDI Help">
<title>NAMIDI Help</title>
</head>
<body>
<img src="icon.png" width="36px" height="36px">
<h1 style="display: inline-block;">NAMIDI</h1>

<h2>Table of Contents</h2>

<ul>
  <li>
    <a href="#about-namidi">About NAMIDI</a>
  </li>
  <li>
    <a href="#getting-started">Getting Started</a>
    <ul>
      <li>
        <a href="#initial-setup">Initial Setup</a>
      </li>
      <li>
        <a href="#hello-namidi">Hello NAMIDI</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#basics">Basics</a>
    <ul>
      <li>
        <a href="#syntax-form">Syntax Form</a>
      </li>
      <li>
        <a href="#quantize">Quantize</a>
      </li>
      <li>
        <a href="#tie-and-rest">Tie and Rest</a>
      </li>
      <li>
        <a href="#sharp-and-flat">Sharp and Flat</a>
      </li>
      <li>
        <a href="#change-sound">Change Sound</a>
      </li>
      <li>
        <a href="#using-channel">Using Channel</a>
      </li>
      <li>
        <a href="#chord">Chord</a>
      </li>
      <li>
        <a href="#polyphony">Polyphony</a>
      </li>
      <li>
        <a href="#using-velocity">Using Velocity</a>
      </li>
      <li>
        <a href="#using-gatetime">Using Gatetime</a>
      </li>
      <li>
        <a href="#octave-rule">Octave Rule</a>
      </li>
      <li>
        <a href="#tempo-change">Tempo Change</a>
      </li>
      <li>
        <a href="#time-signature">Time Signature</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#using-pattern">Using Pattern</a>
    <ul>
      <li>
        <a href="#create-pattern">Create Pattern</a>
      </li>
      <li>
        <a href="#expand-pattern">Expand Pattern</a>
      </li>
      <li>
        <a href="#extend-pattern">Extend Pattern</a>
      </li>
      <li>
        <a href="#ensemble">Ensemble</a>
      </li>
    </ul>
  </li>
</ul>

<h2 id="about-namidi">About NAMIDI</h2>
<p>
NAMIDI is the MIDI Player that plays DSL based music sequence.<br />
The meaning of the name NAMIDI is abbreviation for "Noriyoshi Abe's MIDI Sequencer".<br />
This is not a joke.  hehehe üòù
</p>

<h2 id="getting-started">Getting Started</h2>
<h3 id="initial-setup">Initial Setup</h3>
<i>* This step is going to be unnecessary in the future release.</i>
<p>
<ol>
  <li>IAC Driver</li>
    <ul>
      <li>Open [Audio Midi Setup] from /Application/Utilities/Audio Midi Setup.app</li>
      <li>Select [Window] -&gt; [Show MIDI Window] on the Menu</li>
      <li>Double click [IAC Driver]</li>
      <li>Tick the checkbox named "Device is online"</li>
    </ul>
  <li>Audio Units</li>
    <ul>
      <li>Download and install <a href="https://www.apple.com/jp/itunes/mastered-for-itunes/">AU Lab</a> unless it's already intalled</li>
      <li>Open the bundled file "midi.trak"</li>
    </ul>
    <br />
    <i>
      Because of AU Lab setting is kind of difficult, using "midi.trak" is recommended.
      This file is preset for DSLMusicDevice.
      If you prefer other MIDI source or customizing, see AU Lab's help contents and find out the detail.
    </i>
</ol>

Now, NAMIDI is ready to soundüòÉ

<h3 id="hello-namidi">Hello NAMIDI</h3>
<p>
NAMIDI is not a MIDI editor.  It focuses only playing and preview sequence.
That is why, creating sequence file is needed first.
Don't worry.  The sequence file is quite simple.
It is just a text file with ".namidi" file extention.
</p>

<h4>hello.namidi</h4>
<pre><code>note 1/4 {
  C D E F
}
</code></pre>

The first example is that's it!<br />
Create a text file and type above snipet. Then save it with name "hello.namidi".<br />

<h4>Open with NAMIDI.app</h4>

Next, launch NAMIDI.app and open the file "hello.namidi".<br />
As usualy, just open from file menu.<br />
<br />
Now, you can see the sequence like following list.

<pre><code>
   | 1               2
========================
   | .           x---.  
   | .       x---    .  
   | .               .  
   | .   x---        .  
   | .               .  
C1 | x---            .  
</code></pre>

Then, press 'p' key and you can hear melody of 'C D E F'.

<h4>Adding note to C2</h4>

Let's edit "hello.namidi" with NAMIDI stayed running.<br />
Adding 4 notes up to 1 octave.

<pre><code>note 1/4 {
  C D E F G A B C&gt;
}
</code></pre>

Once you open the .namidi file, it's not need to reopen nor reload again.<br />
When the .namidi file is edited, NAMIDI reload and rebuild sequence automatically.<br />
<br />

Now, you can see the sequence like following list.

<pre><code>
   | 1               2
========================================
C2 | .               .           x---.
   | .               .       x---    .
   | .               .               .
   | .               .   x---        .
   | .               .               .
   | .               x---            .
   | .               .               .
   | .           x---.               .
   | .       x---    .               .
   | .               .               .
   | .   x---        .               .
   | .               .               .
C1 | x---            .               .
</code></pre>


<h3 id="basics">Basics</h3>

<h4 id="syntax-form">Syntax Form</h4>

NAMIDI ignores case of letters.<br />
And source code is free-form as long as no syntax error is contained.<br />

Following lists are all acceptable.

<pre><code>note 1/4 {
  c d e f
}

NOTE 1/4 {
  C
  D
  E
  F
}

Note 1/4
{ C D E F }

notE // What's this?
1/4 {
  C D E F
} 
</code></pre>

Text starting with "/*" is treated as a comment and ignored. The comment ends at the next "*/".<br />
After "//" to end of the line is also treated as a comment.
<pre><code>/*
  This block is ignored.
 */

note 1/4 {
  C // This is comment but C isn't
  D /* This is comment but D and E aren't */ E
  //F Hey!! I'm ignored!!
}
</code></pre>

<h4 id="step">Step</h4>

<p>
The meaning of "Step" in this context is distance between a note and next one.
The ways of specifying step are following paterns.
</p>

<h5>Specify with Time Signature</h5>
<table>
  <tr>
    <td>
<pre><code>// 8 beat
note 1/8 {
  C D E F C D E F
}</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1               2
========================
   | .     x-      x-.  
   | .   x-      x-  .  
   | .               .  
   | . x-      x-    .  
   | .               .  
C1 | x-      x-      .  
</code></pre>
    </td>
  </tr>

  <tr>
    <td>
<pre><code>// Dotted quarter note
note 1/4 . {
  C D E
}</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1               2
========================
   | .               .  
   | .           x------  
   | .               .  
   | .     x-----    .  
   | .               .  
C1 | x-----          .  
</code></pre>
    </td>
  </tr>

  <tr>
    <td>
<pre><code>// Triplet
note 1/4 3 {
  C D E C D E C D E C D E
}</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1                       2  
================================
   | .                       .
   | .   x-    x-    x-    x-.
   | .                       .
   | . x-    x-    x-    x-  .
   | .                       .
C1 | x-    x-    x-    x-    .
</code></pre>
    </td>
  </tr>
</table>

List of available Time Signature is here.
<ul>
  <li>1/1</li>
  <li>1/2</li>
  <li>1/4</li>
  <li>1/8</li>
  <li>1/16</li>
  <li>1/32</li>
  <li>1/64</li>
  <li>and so on.<br />
    <ul>
      <li>Beat numerator must be 1</li>
      <li>Beat denominator must be 1 or power of 2</li>
      <li>Actual step length greater than 0</li>
    </ul>
  </li>
</ul>

<h5>Specify with Integer</h5>

<table>
  <tr>
    <td>
<pre><code>/*
 * Quintuplet
 *   * Resolution of quarter note is 480
 */
note 24 {
  C D E F G
  C D E F G
  C D E F G
  C D E F G
}</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1                   2
============================
   | .   x    x    x    x.
   | .                   .
   | .  x    x    x    x . 
   | . x    x    x    x  .
   | .                   .
   | .x    x    x    x   .
   | .                   .
C1 | x    x    x    x    .
</code></pre>
    </td>
  </tr>
</table>


<h4 id="tie-and-rest">Tie and Rest</h4>

"~" acts as Tie.  Tie inclements step and extends previous note.<br />
"^" acts as Rest.  Rest inclements step and does nothing.

<table>
  <tr>
    <td>
<pre><code>note 1/8 {
  C^ C^ D~ E~~~
}</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1               2
=========================
   | .           x-------
   | .               .
   | .       x---    .    
   | .               .
C1 | x-  x-          .
</code></pre>
    </td>
  </tr>
</table>


<h4 id="sharp-and-flat">Charp and Flat</h4>

Sharp or Flat tone is simply represented by adding '#' or 'b'.

<table>
  <tr>
    <td>
<pre><code>note 1/4 {
  C# D# F# Gb Ab Bb
}
</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1               2  
=============================
B  | .               .
   | .               .   x---
A  | .               .
   | .               x---
G  | .               .
   | .       x---x---.
F  | .               .
E  | .               .
   | .   x---        .
D  | .               .
   | x---            .
C1 | .               .
</code></pre>
    </td>
  </tr>
</table>


<h4 id="change-sound">Change Sound</h4>

Instruments can be changed with "sound select" statement.<br />

<pre><code>
// Params are &lt;LSB&gt; &lt;MSB&gt; &lt;Program No&gt; from left.
sound select 0 0 27 // This means Electric Guitar (jazz)
                    // Expanded MIDI Messages are
                    //   - Bank Select&lt;MSB&gt; #0
                    //   - Bank Select&lt;LSB&gt; #0
                    //   - Program change&lt;&gt; #27

note 1/4 {
  C D E F // Play with Electric Guitar (jazz)
}

sound select 127 0 0 // This means Standard Kit of Drum sounds

note 1/4 {
  C // This produces Bass Drum 1 sound
  E // This produces Electric Snare sound
}
</code></pre>

<p>
Instruments depends on MIDI source.
See Sound Set of the MIDI source.<br />
<i>* Sound Set of DSLMusicDevice based on <a target="_blank" href="http://www.midi.org/techspecs/gm1sound.php">General MIDI Level 1 Sound Set</a></i> 
</p>

<p>
The statment changes instruments of current channel.<br />
See <a href="#using-channel">Using Channel</a>
</p>

<h4 id="using-channel">Using Channel</h4>

16 channels are supported same as General MIDI.

<table>
  <tr>
    <td>
<pre><code>channel 1

note 1/4 {
  C D E F
}

channel 10

note 1/4 {
  C C C C
}
</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1               2               3
========================================
   | .           x---.               .
   | .       x---    .               .
   | .               .               .
   | .   x---        .               .
   | .               .               .
C1 | x---            +---+---+---+---.

                             x: channel 1
                             +: channel 10
</code></pre>
    </td>
  </tr>
</table>

Behavior of the channel 10 depends on MIDI source.<br />
<i>* Channel 10 on DSLMusicDevice is reserved for percussion.</i> 


<h4 id="chord">Chord</h4>

Pitch name can be joined by ','.<br />
Joined pitch names act as chord.

<table>
  <tr>
    <td>
<pre><code>
note 1/2 {
  C E,G,B
}
</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1               2 
========================
   | .       x-------. 
   | .               . 
   | .               . 
   | .               . 
   | .       x-------. 
   | .               . 
   | .               . 
   | .       x-------. 
   | .               . 
   | .               . 
   | .               . 
C1 | x-------        .
</code></pre>
    </td>
  </tr>
</table>


<h4 id="polyphony">Polyphony</h4>

'note' statement also can be joined by ','.<br />
Those notes sound simultaneously from same position.

<table>
  <tr>
    <td>
<pre><code>
note 1/4 { C~~~ },
note 1/4 { ^E~~ },
note 1/4 { ^^G~ },
note 1/4 { ^^^B }
</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1               2 
========================
   | .           x---. 
   | .               . 
   | .               . 
   | .               . 
   | .       x-------. 
   | .               . 
   | .               . 
   | .   x-----------. 
   | .               . 
   | .               . 
   | .               . 
C1 | x---------------.
</code></pre>
    </td>
  </tr>
</table>


<h4 id="using-velocity">Using Velocity</h4>

Velocity can be specified 0 to 127 same as General MIDI.<br />
The default value is 100 and can be changed by 'velocity' statement.

<pre><code>velocity 127 // After this statement, note's velocity is set with 127

note 1/2 {
  C D E F // These notes sound on loud
}
</code></pre>

Velocity can be assigned temporarily with no effect on after notes.

<pre><code>velocity 127

note 1/2 {
  C(velocity=100)     // Velocity is 100
  D                   // Velocity is 127
  E,F,G(velocity=100) // Velocity of E and F are 127.  Velocity of G is 100
  A                   // Velocity is 127
}
</code></pre>


<h4 id="using-gatetime">Using Gatetime</h4>

Gatetime means how long note sustains, same as major DAW.<br />
The default is equal to step.  As discussed <a href="#tie-and-rest">previously</a>, lenght of note, it means gatetime, can be extended by 'tie'.<br />
The cases that this expression is needed are usually following 2 patterns.

<h5>Rhythm Composing</h5>

Because length of percussive note has no meaning, displaying gatetime is unnecessary.<br />
Setting fixed length of gatetime is useful for displaying percussive notes clearly.

<table>
  <tr>
    <td>
<pre><code>
// No gatetime setting

note 1/8 {
  C ^ E ^ C C E ^
}
</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1               2  
========================
   | .               .  
   | .   x-      x-  .  
   | .               .  
   | .               .  
   | .               .  
C1 | x-      x-x-    .  
</code></pre>
    </td>
  </tr>

  <tr>
    <td>
<pre><code>
gatetime 1/16

note 1/8 {
  C ^ E ^ C C E ^
}
</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1               2
========================
   | .               .   
   | .   x       x   .   
   | .               .   
   | .               .   
   | .               .   
C1 | x       x x     .
</code></pre>
    </td>
  </tr>
</table>


<h5>Cut off end of sound</h5>

Sometimes, short length of note, like staccato, is preferred depending on the instrument.<br />
However, once gatetime is set, this settings is applied until nexttime it is set.<br />
With 'cut off' modifier, gatetime can be shortened specified value by step length.

<table>
  <tr>
    <td>
<pre><code>gatetime cutoff 30

note 1/4 {
  C D E ~
},
note 1/2 {
  G G
}
</code></pre>
    </td>
    <td>
      <br /> &nbsp;&nbsp;&nbsp;&nbsp; -&gt; &nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td>
<pre><code>
   | 1               2 
========================
   | x------ x------ . 
   | .               . 
   | .               . 
   | .       x------ . 
   | .               . 
   | .   x--         . 
   | .               . 
C1 | x--             .
</code></pre>
    </td>
  </tr>
</table>


<h4 id="octave-rule">Octave Rule</h4>
<h4 id="tempo-change">Tempo Change</h4>
<h4 id="time-signature">Time Signature</h4>

<h3 id="using-pattern">Using Pattern</h3>
<h4 id="create-pattern">Create Pattern</h4>
<h4 id="expand-pattern">Expand Pattern</h4>
<h4 id="extend-pattern">Extend Pattern</h4>
<h4 id="ensemble">Ensemble</h4>
